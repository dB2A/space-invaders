<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Electronic Basstard - Space Invaders</title>
        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="js/raphael-min.js"></script>
        <script type="text/javascript" src="js/space-invader.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                    var anims            = [];
                    var duration         = 1000;
                    var maxX             = 100;
                    var maxY             = 100;
                    var minX             = 0;
                    var minY             = 0;
                    var numSpaceInvaders = 25;

                    anims.push(function() {
                        return Raphael.animation({
                            transform: '...t'+maxX+','+minY,
                            fill: "#F00"
                        }, duration , 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform: '...t'+minX+','+maxY,
                            fill: "#0F0"
                        }, duration , 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform : '...t-' + maxX + ',' + minY,
                            fill: "#00F"
                        }, duration, 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform : '...t'+minX+',-'+maxY,
                            fill: "#00F"
                        }, duration, 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform : '...t'+maxX+',-'+maxY,
                            fill: "#F0F0F0"
                        }, duration, 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform : '...t-'+maxX+',-'+maxY,
                            fill: "#0F0F0F"
                        }, duration, 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform : '...t'+maxX+','+maxY,
                            fill: "#F00FF0"
                        }, duration, 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform : '...t-'+maxX+','+maxY,
                            fill: "#0FF00F"
                        }, duration, 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform : '...s1.5',
                            fill: "#FFCC00"
                        }, duration, 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    anims.push(function() {
                        return Raphael.animation({
                            transform : '...s0.5',
                            fill: "#FFCC00"
                        }, duration, 'linear', function() {
                            $(this).trigger('animationEnded');
                        });
                    });

                    function getNextAnim() {
                        return anims[Math.floor(Math.random() * anims.length)]();
                    }

                    var paper = Raphael("spaceinvader", document.documentElement.clientWidth, document.documentElement.clientHeight - 5);
                    var s = [];
                    for(var i=0; i<numSpaceInvaders;i++) {
                        s[i] = paper.path(spaceinvaderPath);
                        s[i].translate(paper.width / 2 - 110, paper.height / 2 - 80);
                        $(s[i]).bind({
                                'animationEnded' : function(event) {
                                    $(event.target).get(0).animate(getNextAnim());
                                    }
                                });
                        $(s[i]).trigger('animationEnded');
                    }
        });
        </script>
    </head>
    <body style="background-color: #000; margin: 0; padding: 0;">
        <div id="spaceinvader"></div>
    </body>
</html>
